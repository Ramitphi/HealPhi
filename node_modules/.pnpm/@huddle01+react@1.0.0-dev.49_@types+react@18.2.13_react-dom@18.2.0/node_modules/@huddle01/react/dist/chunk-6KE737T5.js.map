{"version":3,"sources":["../src/hooks/useRoomControls.ts"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport {\n  NewRoomControls,\n  RoomEvents,\n  RoomInfo,\n} from '@huddle01/web-core/types';\nimport useHuddle01 from './useHuddle01';\n\nexport const useRoomControls = (props?: {\n  onRoomControlsUpdated: (data: NewRoomControls) => void;\n  onRoomLeave: (data: RoomEvents['room-closed'][0]) => void;\n}) => {\n  const { huddleClient } = useHuddle01();\n\n  const room = huddleClient.room;\n\n  const [roomControls, setRoomControls] = useState<RoomInfo['config']>(\n    room.config,\n  );\n\n  const handleRoomClose = useCallback(\n    (data: RoomEvents['room-closed'][0]) => {\n      if (props?.onRoomLeave) props.onRoomLeave(data);\n    },\n    [props?.onRoomLeave],\n  );\n\n  const handleRoomControlsUpdate = useCallback(\n    (data: NewRoomControls) => {\n      if (props?.onRoomControlsUpdated) props.onRoomControlsUpdated(data);\n\n      setRoomControls(room.config);\n    },\n    [props?.onRoomControlsUpdated],\n  );\n\n  useEffect(() => {\n    room.once('room-closed', handleRoomClose);\n\n    room.on('room-controls-updated', handleRoomControlsUpdate);\n\n    return () => {\n      room.off('room-closed', handleRoomClose);\n\n      room.off('room-controls-updated', handleRoomControlsUpdate);\n    };\n  }, []);\n\n  const updateControls = room.updateRoomControls;\n\n  return {\n    roomControls,\n    updateControls,\n  };\n};\n"],"mappings":";;;;;AAAA,SAAS,aAAa,WAAW,gBAAgB;AAQ1C,IAAM,kBAAkB,CAAC,UAG1B;AACJ,QAAM,EAAE,aAAa,IAAI,oBAAY;AAErC,QAAM,OAAO,aAAa;AAE1B,QAAM,CAAC,cAAc,eAAe,IAAI;AAAA,IACtC,KAAK;AAAA,EACP;AAEA,QAAM,kBAAkB;AAAA,IACtB,CAAC,SAAuC;AACtC,UAAI,OAAO;AAAa,cAAM,YAAY,IAAI;AAAA,IAChD;AAAA,IACA,CAAC,OAAO,WAAW;AAAA,EACrB;AAEA,QAAM,2BAA2B;AAAA,IAC/B,CAAC,SAA0B;AACzB,UAAI,OAAO;AAAuB,cAAM,sBAAsB,IAAI;AAElE,sBAAgB,KAAK,MAAM;AAAA,IAC7B;AAAA,IACA,CAAC,OAAO,qBAAqB;AAAA,EAC/B;AAEA,YAAU,MAAM;AACd,SAAK,KAAK,eAAe,eAAe;AAExC,SAAK,GAAG,yBAAyB,wBAAwB;AAEzD,WAAO,MAAM;AACX,WAAK,IAAI,eAAe,eAAe;AAEvC,WAAK,IAAI,yBAAyB,wBAAwB;AAAA,IAC5D;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,QAAM,iBAAiB,KAAK;AAE5B,SAAO;AAAA,IACL;AAAA,IACA;AAAA,EACF;AACF;","names":[]}